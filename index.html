<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>King County ADU Explorer</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="site-header-inner">
        <h1>King County ADU Explorer</h1>
        <p class="muted">
          Compare ADU &amp; DADU regulations across municipalities, test
          feasibility on a specific lot, and review built ADU permit trends.
        </p>
      </div>
    </header>

    <main class="page-main">
      <!-- City scorecards / overview -->
      <section class="section">
        <header class="card-header">
          <h2>City overview</h2>
          <p class="muted">
            Quick snapshot of how each city treats ADUs and DADUs based on your
            zoning dataset.
          </p>
        </header>
        <div id="cityScorecards" class="city-scorecards"></div>
      </section>

      <!-- Regulations table + filters -->
      <section class="section reg-section">
        <header class="card-header">
          <h2>ADU / DADU regulations by zone</h2>
          <p class="muted">
            Filter the dataset and compare key zoning rules across King County
            jurisdictions. Use the search to look across all columns.
          </p>
        </header>

        <!-- Filters directly above the regulation table -->
        <div class="reg-controls">
          <div class="reg-filters">
            <select id="cityFilter"></select>
            <select id="zoneFilter"></select>
            <select id="zoneTypeFilter"></select>
            <select id="aduFilter"></select>
            <select id="daduFilter"></select>
            <select id="ownerOccFilter"></select>
          </div>

          <div class="reg-search-row">
            <div class="search-group">
              <span>Search all fields</span>
              <input
                id="searchInput"
                type="text"
                placeholder="e.g. R-8 alley, owner occupancy"
              />
            </div>
            <div class="search-group">
              <button id="clearFilters" type="button">Clear filters</button>
              <span id="summary"></span>
            </div>
          </div>
        </div>

        <!-- Regulation table -->
        <div class="reg-table-wrapper">
          <table id="dataTable" class="reg-table">
            <thead id="tableHead"></thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>
      </section>

      <!-- Feasibility checker -->
      <section class="section feas-section">
        <header class="card-header">
          <h2>Lot-level ADU feasibility checker</h2>
          <p class="muted">
            Pick a city and zone from the dataset, then plug in a specific lot
            and target ADU size to see a quick feasibility snapshot and a
            diagram of the parcel.
          </p>
        </header>

        <div class="feas-layout">
          <!-- Left: inputs -->
          <div class="feas-panel feas-form">
            <h3>Inputs</h3>

            <div class="form-row">
              <label for="feasCity">City</label>
              <select id="feasCity"></select>
            </div>

            <div class="form-row">
              <label for="feasZone">Zone</label>
              <select id="feasZone"></select>
            </div>

            <div class="form-row row-inline">
              <div>
                <label for="feasLotSize">Lot size (sf)</label>
                <input
                  type="number"
                  id="feasLotSize"
                  placeholder="e.g. 6,000"
                  min="0"
                />
              </div>
              <div>
                <label for="feasLotWidth">Lot width (ft)</label>
                <input
                  type="number"
                  id="feasLotWidth"
                  placeholder="e.g. 50"
                  min="0"
                />
              </div>
              <div>
                <label for="feasLotDepth">Lot depth (ft)</label>
                <input
                  type="number"
                  id="feasLotDepth"
                  placeholder="e.g. 120"
                  min="0"
                />
              </div>
            </div>

            <div class="form-row row-inline">
              <div>
                <label for="feasHouseWidth">Existing home width (ft)</label>
                <input
                  type="number"
                  id="feasHouseWidth"
                  placeholder="optional"
                  min="0"
                />
              </div>
              <div>
                <label for="feasHouseDepth">Existing home depth (ft)</label>
                <input
                  type="number"
                  id="feasHouseDepth"
                  placeholder="optional"
                  min="0"
                />
              </div>
            </div>

            <div class="form-row">
              <label for="feasADUSize">Target ADU size (sf)</label>
              <input
                type="number"
                id="feasADUSize"
                placeholder="e.g. 800"
                min="0"
              />
            </div>

            <div class="form-row row-inline check-row">
              <label>
                <input type="checkbox" id="feasTransit" />
                ADU is within transit radius
              </label>
              <label>
                <input type="checkbox" id="feasAlley" />
                Lot has alley access
              </label>
            </div>

            <button id="runFeasibility" type="button" class="primary-btn">
              Run feasibility check
            </button>
          </div>

          <!-- Right: results + diagram -->
          <div class="feas-panel feas-results">
            <div class="feas-summary-box">
              <div id="feasibilitySummary"></div>
            </div>
            <div id="feasibilityDetails" class="feas-details"></div>

            <div class="feas-diagram-card">
              <h3>Parcel diagram</h3>
              <p class="muted small">
                Drag and resize the existing home and ADU boxes; lot width and
                depth can also be adjusted using the green handles. Labels
                update as the shapes change.
              </p>
              <div id="feasDiagram" class="feas-diagram"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Permits / production -->
      <section class="section permits-section">
        <header class="card-header">
          <h2>ADU permits &amp; production</h2>
          <p class="muted">
            Historic ADU permit counts by jurisdiction, based on your permits
            CSV. Use the filters to focus on a specific city or time period.
          </p>
        </header>

        <div class="permits-controls">
          <div class="permits-filters">
            <select id="permitsCityFilter"></select>
            <select id="permitsYearFilter"></select>
          </div>
          <div class="permits-meta">
            <button id="permitsClearFilters" type="button">
              Clear permit filters
            </button>
            <span id="permitsSummary"></span>
          </div>
        </div>

        <div class="permits-table-wrapper">
          <table class="permits-table">
           <thead>
  <tr>
    <th>City</th>
    <th>Project</th>
    <th>ADU type</th>
    <th>Status</th>
    <th>Size (sf)</th>
    <th>Zone</th>
    <th>Approval date</th>
    <th>Permit #</th>
    <th>Parcel</th>
    <th>Link</th>
  </tr>
</thead>

            <tbody id="permitsTableBody"></tbody>
          </table>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <p class="muted">
        Data and diagrams are simplified for feasibility screening and do not
        replace a detailed code review or conversation with planning staff.
      </p>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
